(this["webpackJsonpblog-admin"]=this["webpackJsonpblog-admin"]||[]).push([[0],{154:function(e,t,a){},187:function(e,t,a){},188:function(e,t,a){},190:function(e,t,a){},191:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(26),s=a.n(r),i=a(67),d=a(22),l=a(23),o=(a(153),a(154),a(144)),j=a(138),b=a(198),O=a(200),h=a(34),u=a(203),x=a(204),p="http://47.97.26.45:7001/admin/",m={checkLogin:p+"checkLogin",getType:p+"getType",addArticle:p+"addArticle",updateArticle:p+"updateArticle",getArticlelist:p+"getArticlelist",delArticle:p+"delArticle/",getArticleById:p+"getArticleById/",isLogin:p+"isLogin",getBooks:p+"getBooks",addBooks:p+"addBooks"},g=a(40),f=a.n(g),v=a(6);var y=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(""),s=Object(l.a)(r,2),i=s[0],p=s[1],g=Object(n.useState)(!1),y=Object(l.a)(g,2),I=y[0],A=y[1],w=Object(d.f)();return Object(v.jsx)("div",{className:"login-div",children:Object(v.jsx)(j.a,{tip:"Loading...",spinning:I,children:Object(v.jsxs)(b.a,{title:"Berwin Blog  System",bordered:!0,style:{width:400},children:[Object(v.jsx)(O.a,{id:"userName",size:"large",placeholder:"Enter your userName",prefix:Object(v.jsx)(u.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),onChange:function(e){c(e.target.value)}}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)(O.a.Password,{id:"password",size:"large",placeholder:"Enter your password",prefix:Object(v.jsx)(x.a,{type:"key",style:{color:"rgba(0,0,0,.25)"}}),onChange:function(e){p(e.target.value)}}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)(h.a,{type:"primary",size:"large",block:!0,onClick:function(){if(A(!0),setTimeout((function(){A(!1)}),1e3),!a)return o.b.error("\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a"),!1;if(!/^[A-Za-z0-9]+$/.test(a))return o.b.error("\u7528\u6237\u540d\u53ea\u6709\u82f1\u6587\u5927\u5c0f\u5199\u548c\u6570\u5b57\u5b57\u7b26"),!1;if(!i)return o.b.error("\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a"),!1;if(!/^[a-zA-Z0-9_]+$/.test(i))return o.b.error("\u5bc6\u7801\u53ea\u80fd\u5305\u542b\u6570\u5b57\u82f1\u6587\u5b57\u6bcd\u4e0e\u4e0b\u5212\u7ebf"),!1;var e={userName:a,password:i};f()({method:"post",url:m.checkLogin,data:e,withCredentials:!0}).then((function(e){A(!1),"\u767b\u5f55\u6210\u529f"===e.data.data?(console.log(e.data.openId),localStorage.setItem("openId",e.data.openId),w.push("/adminIndex")):o.b.error("\u7528\u6237\u540d\u5bc6\u7801\u9519\u8bef")})).catch((function(e){console.log(e),o.b.error("\u767b\u5f55\u5931\u8d25")}))},children:" Login in "})]})})})},I=a(196),A=a(121),w=a(202),k=(a(187),a(205)),C=a(206),S=a(207),L=a(208),B=a(66),N=a.n(B),z=(a(188),a(83)),_=a(78),T=a(45),H=a(197),E=a(195),W=a(148),M=z.a.Option,P=O.a.TextArea;var J=function(e){var t=Object(d.f)(),a=Object(n.useState)(0),c=Object(l.a)(a,2),r=c[0],s=c[1],i=Object(n.useState)(""),j=Object(l.a)(i,2),b=j[0],u=j[1],x=Object(n.useState)(""),p=Object(l.a)(x,2),g=p[0],y=p[1],I=Object(n.useState)(""),A=Object(l.a)(I,2),w=A[0],k=A[1],C=Object(n.useState)(),S=Object(l.a)(C,2),L=S[0],B=S[1],J=Object(n.useState)(""),K=Object(l.a)(J,2),R=K[0],V=K[1],Z=Object(n.useState)(),$=Object(l.a)(Z,2),D=$[0],F=$[1],q=Object(n.useState)([]),G=Object(l.a)(q,2),Q=G[0],U=G[1],X=Object(n.useState)([]),Y=Object(l.a)(X,2),ee=Y[0],te=Y[1],ae=Object(n.useState)(1),ne=Object(l.a)(ae,2),ce=ne[0],re=ne[1],se=Object(n.useState)(),ie=Object(l.a)(se,2),de=ie[0],le=ie[1],oe=Object(n.useState)(),je=Object(l.a)(oe,2),be=je[0],Oe=je[1];N.a.setOptions({renderer:N.a.Renderer(),gfm:!0,pedantic:!1,sanitize:!1,tables:!0,breaks:!1,smartLists:!0,smartypants:!1});var he=function(e){y(e.target.value);var t=N()(e.target.value);k(t)},ue=function(e){B(e.target.value);var t=N()(e.target.value);V(t)},xe=function(e){Oe(e.target.value)},pe=function(){if(!be)return o.b.error("\u5c0f\u518c\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"),!1;f()({method:"post",url:m.addBooks,header:{"Access-Control-Allow-Origin":"*"},withCredentials:!0,data:{addBook:be}}).then((function(e){console.log(e)})),Oe()};return Object(n.useEffect)((function(){f()({method:"get",url:m.getType,header:{"Access-Control-Allow-Origin":"*"},withCredentials:!0}).then((function(e){"\u6ca1\u6709\u767b\u5f55"===e.data.data?(localStorage.removeItem("openId"),t.push("/login")):U(e.data.data)})),f()({method:"get",url:m.getBooks,header:{"Access-Control-Allow-Origin":"*"},withCredentials:!0}).then((function(e){"\u6ca1\u6709\u767b\u5f55"===e.data.data?(localStorage.removeItem("openId"),t.push("/login")):te(e.data.data)}));var a,n=e.match.params.id;n&&(s(n),a=n,f()(m.getArticleById+a,{withCredentials:!0,header:{"Access-Control-Allow-Origin":"*"}}).then((function(e){u(e.data.data[0].title),y(e.data.data[0].article_content);var t=N()(e.data.data[0].article_content);k(t),B(e.data.data[0].introduce);var a=N()(e.data.data[0].introduce);V(a),F(e.data.data[0].addTime),re(e.data.data[0].typeId)})))}),[]),Object(v.jsx)("div",{children:Object(v.jsxs)(_.a,{gutter:5,children:[Object(v.jsxs)(T.a,{span:18,children:[Object(v.jsxs)(_.a,{gutter:10,children:[Object(v.jsx)(T.a,{span:20,children:Object(v.jsx)(O.a,{value:b,placeholder:"\u535a\u5ba2\u6807\u9898",size:"large",onChange:function(e){u(e.target.value)}})}),Object(v.jsxs)(T.a,{span:4,children:["\xa0",Object(v.jsx)(z.a,{defaultValue:"\u6280\u672f\u535a\u5ba2",size:"large",onChange:function(e){re(e)},children:Q.map((function(e,t){return Object(v.jsx)(M,{value:e.id,children:e.typename},t)}))})]})]}),Object(v.jsx)("br",{}),Object(v.jsxs)(_.a,{gutter:10,children:[Object(v.jsx)(T.a,{span:12,children:Object(v.jsx)(P,{className:"markdown-content",rows:35,placeholder:"\u6587\u7ae0\u5185\u5bb9",onChange:he,onPressEnter:he})}),Object(v.jsx)(T.a,{span:12,children:Object(v.jsx)("div",{className:"show-html",dangerouslySetInnerHTML:{__html:w}})})]})]}),Object(v.jsx)(T.a,{span:6,children:Object(v.jsxs)(_.a,{children:[Object(v.jsxs)(T.a,{span:24,children:[Object(v.jsx)(h.a,{size:"large",children:"\u6682\u5b58\u6587\u7ae0"}),"\xa0",Object(v.jsx)(h.a,{type:"primary",size:"large",onClick:function(){if(!ce)return o.b.error("\u5fc5\u987b\u9009\u62e9\u6587\u7ae0\u7c7b\u522b"),!1;if(!b)return o.b.error("\u6587\u7ae0\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"),!1;if(!g)return o.b.error("\u6587\u7ae0\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a"),!1;if(!L)return o.b.error("\u7b80\u4ecb\u4e0d\u80fd\u4e3a\u7a7a"),!1;if(!D)return o.b.error("\u53d1\u5e03\u65e5\u671f\u4e0d\u80fd\u4e3a\u7a7a"),!1;if(!de)return o.b.error("\u8bf7\u9009\u62e9\u6587\u7ae0\u7684\u5c0f\u518c"),!1;var e={};e.type_id=ce,e.title=b,e.article_content=g,e.introduce=L,e.book_id=de;var t=D.replace("-","/");e.addTime=new Date(t).getTime()/1e3,0===r?(console.log("articleId="+r),e.view_count=Math.ceil(100*Math.random())+1e3,f()({method:"post",url:m.addArticle,data:e,withCredentials:!0}).then((function(e){s(e.data.insertId),e.data.isScuccess?o.b.success("\u6587\u7ae0\u4fdd\u5b58\u6210\u529f"):o.b.error("\u6587\u7ae0\u4fdd\u5b58\u5931\u8d25")}))):(e.id=r,f()({method:"post",url:m.updateArticle,header:{"Access-Control-Allow-Origin":"*"},data:e,withCredentials:!0}).then((function(e){e.data.isScuccess?o.b.success("\u6587\u7ae0\u4fdd\u5b58\u6210\u529f"):o.b.error("\u4fdd\u5b58\u5931\u8d25")})))},children:"\u53d1\u5e03\u6587\u7ae0"}),Object(v.jsx)("br",{})]}),Object(v.jsxs)(T.a,{span:24,children:[Object(v.jsx)("br",{}),Object(v.jsx)(P,{rows:4,placeholder:"\u6587\u7ae0\u7b80\u4ecb",onChange:ue,onPressEnter:ue}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)("div",{className:"introduce-html",dangerouslySetInnerHTML:{__html:"\u6587\u7ae0\u7b80\u4ecb\uff1a"+R}})]}),Object(v.jsx)(T.a,{span:12,children:Object(v.jsx)("div",{className:"date-select",children:Object(v.jsx)(H.a,{onChange:function(e,t){return F(t)},placeholder:"\u53d1\u5e03\u65e5\u671f",size:"large"})})}),Object(v.jsx)(T.a,{span:12,children:Object(v.jsxs)("div",{className:"artical-book",children:["\xa0",Object(v.jsx)(z.a,{style:{width:"80%"},defaultValue:"\u9009\u62e9\u5c0f\u518c",size:"large",onChange:function(e){le(e)},dropdownRender:function(e){return Object(v.jsxs)("div",{children:[e,Object(v.jsx)(E.a,{style:{margin:"4px 0"}}),Object(v.jsxs)("div",{style:{display:"flex",flexWrap:"nowrap",padding:8},children:[Object(v.jsx)(O.a,{style:{flex:"auto"},value:be,onChange:xe}),Object(v.jsxs)("a",{style:{flex:"none",padding:"8px",display:"block",cursor:"pointer"},onClick:pe,children:[Object(v.jsx)(W.a,{})," \u6dfb\u52a0\u5c0f\u518c"]})]})]})},children:ee.map((function(e,t){return Object(v.jsx)(M,{value:e.id,children:e.bookname},t)}))})]})})]})})]})})},K=(a(190),a(201)),R=a(199),V=K.a.confirm;var Z=function(e){var t=Object(n.useState)([]),a=Object(l.a)(t,2),c=a[0],r=a[1],s=Object(d.f)(),i=function(){f()({method:"get",url:m.getArticlelist,withCredentials:!0,header:{"Access-Control-Allow-Origin":"*"}}).then((function(e){"\u6ca1\u6709\u767b\u5f55"===e.data.data?(localStorage.removeItem("openId"),s.push("/login")):(console.log(e.data),r(e.data.list))}))};return Object(n.useEffect)((function(){i()}),[]),Object(v.jsx)("div",{children:Object(v.jsx)(R.b,{header:Object(v.jsxs)(_.a,{className:"list-div",children:[Object(v.jsx)(T.a,{span:8,children:Object(v.jsx)("b",{children:"\u6807\u9898"})}),Object(v.jsx)(T.a,{span:3,children:Object(v.jsx)("b",{children:"\u7c7b\u522b"})}),Object(v.jsx)(T.a,{span:5,children:Object(v.jsx)("b",{children:"\u53d1\u5e03\u65f6\u95f4"})}),Object(v.jsx)(T.a,{span:4,children:Object(v.jsx)("b",{children:"\u6d4f\u89c8\u91cf"})}),Object(v.jsx)(T.a,{span:4,children:Object(v.jsx)("b",{children:"\u64cd\u4f5c"})})]}),bordered:!0,dataSource:c,renderItem:function(e){return Object(v.jsx)(R.b.Item,{children:Object(v.jsxs)(_.a,{className:"list-div",children:[Object(v.jsx)(T.a,{span:8,children:e.title}),Object(v.jsx)(T.a,{span:3,children:e.typeName}),Object(v.jsx)(T.a,{span:5,children:e.addTime}),Object(v.jsx)(T.a,{span:4,children:e.view_count}),Object(v.jsxs)(T.a,{span:4,children:[Object(v.jsx)(h.a,{type:"primary",onClick:function(){var t;t=e.id,s.push("/adminIndex/addArticle/"+t)},children:"\u4fee\u6539"}),"\xa0",Object(v.jsx)(h.a,{onClick:function(){var t;t=e.id,V({title:"\u786e\u5b9a\u8981\u5220\u9664\u8fd9\u7bc7\u535a\u5ba2\u6587\u7ae0\u5417?",content:"\u5982\u679c\u4f60\u70b9\u51fbOK\u6309\u94ae\uff0c\u6587\u7ae0\u5c06\u4f1a\u6c38\u8fdc\u88ab\u5220\u9664\uff0c\u65e0\u6cd5\u6062\u590d\u3002",onOk:function(){f()(m.delArticle+t,{withCredentials:!0}).then((function(e){o.b.success("\u6587\u7ae0\u5220\u9664\u6210\u529f"),i()}))},onCancel:function(){o.b.success("\u6ca1\u6709\u4efb\u4f55\u6539\u53d8")}})},children:"\u5220\u9664 "})]})]})})}})})},$=function(){return Object(v.jsx)("div",{children:"\u5de5\u4f5c\u53f0"})},D=function(){return Object(v.jsx)("div",{children:"\u7559\u8a00\u7ba1\u7406"})},F=I.a.Header,q=I.a.Content,G=I.a.Footer,Q=I.a.Sider;var U=function(e){var t=Object(n.useState)(!1),a=Object(l.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)(),i=Object(l.a)(s,2),o=i[0],j=i[1],b=Object(n.useState)(),O=Object(l.a)(b,2),h=O[0],u=O[1];Object(n.useEffect)((function(){console.log(e.location.pathname);var t=e.location.pathname;"/adminIndex/addArticle"===t?(j("addArticle"),u("\u6dfb\u52a0\u6587\u7ae0")):"/adminIndex/articleList"===t?(j("articleList"),u("\u6587\u7ae0\u5217\u8868")):"/adminIndex"===t?(j("Home"),u("\u5de5\u4f5c\u53f0")):"/adminIndex/leftWord"===t&&(j("leftWord"),u("\u7559\u8a00\u7ba1\u7406"))}),[]);var x=Object(d.f)();return Object(v.jsxs)(I.a,{style:{minHeight:"100vh"},children:[Object(v.jsxs)(Q,{collapsible:!0,collapsed:c,onCollapse:function(e){r(e)},children:[Object(v.jsx)("div",{className:"logo",children:!c&&"Berwin\u7684\u535a\u5ba2\u540e\u53f0"}),Object(v.jsxs)(A.a,{theme:"dark",selectedKeys:[o],mode:"inline",onSelect:function(e){"addArticle"===e.key?(x.push("/adminIndex/addArticle"),j("addArticle"),u("\u6dfb\u52a0\u6587\u7ae0")):"articleList"===e.key?(x.push("/adminIndex/articleList"),j("articleList"),u("\u6587\u7ae0\u5217\u8868")):"Home"===e.key?(x.push("/adminIndex"),j("Home"),u("\u5de5\u4f5c\u53f0")):"leftWord"===e.key&&(x.push("/adminIndex/leftWord"),j("leftWord"),u("\u7559\u8a00\u7ba1\u7406"))},children:[Object(v.jsxs)(A.a.Item,{children:[Object(v.jsx)(k.a,{}),Object(v.jsx)("span",{children:"\u5de5\u4f5c\u53f0"})]},"Home"),Object(v.jsxs)(A.a.Item,{children:[Object(v.jsx)(C.a,{}),Object(v.jsx)("span",{children:"\u6587\u7ae0\u5217\u8868"})]},"articleList"),Object(v.jsxs)(A.a.Item,{children:[Object(v.jsx)(S.a,{}),Object(v.jsx)("span",{children:"\u6dfb\u52a0\u6587\u7ae0"})]},"addArticle"),Object(v.jsxs)(A.a.Item,{children:[Object(v.jsx)(L.a,{}),Object(v.jsx)("span",{children:"\u7559\u8a00\u7ba1\u7406"})]},"leftWord")]})]}),Object(v.jsxs)(I.a,{children:[Object(v.jsx)(F,{style:{background:"#fff",padding:0}}),Object(v.jsxs)(q,{style:{margin:"0 16px"},children:[Object(v.jsxs)(w.a,{style:{margin:"16px 0"},children:[Object(v.jsx)(w.a.Item,{children:"\u540e\u53f0\u7ba1\u7406"}),Object(v.jsx)(w.a.Item,{children:h})]}),Object(v.jsxs)("div",{style:{padding:24,background:"#fff",minHeight:360},children:[Object(v.jsx)(d.b,{path:"/adminIndex",exact:!0,component:$})," ",Object(v.jsx)(d.b,{path:"/adminIndex/addArticle",exact:!0,component:J}),Object(v.jsx)(d.b,{path:"/adminIndex/addArticle/:id",exact:!0,component:J}),Object(v.jsx)(d.b,{path:"/adminIndex/articleList",exact:!0,component:Z}),Object(v.jsx)(d.b,{path:"/adminIndex/leftWord",exact:!0,component:D})]})]}),Object(v.jsx)(G,{style:{textAlign:"center"},children:"Berwin.com"})]})]})};var X=function(){return Object(v.jsxs)(i.a,{children:[Object(v.jsx)(d.b,{exact:!0,path:"/",children:Object(v.jsx)(d.a,{to:"/adminIndex"})}),Object(v.jsx)(d.b,{path:"/login",exact:!0,component:y}),Object(v.jsx)(d.b,{path:"/adminIndex/",component:U})]})};s.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(X,{})}),document.getElementById("root"))}},[[191,1,2]]]);
//# sourceMappingURL=main.2f7fbb93.chunk.js.map